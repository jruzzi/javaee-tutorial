
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Concurrency and Transactions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>

<div id="preamble">
<div class="sectionbody">
<table id="top" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 45%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Java Platform, Enterprise Edition The Java EE Tutorial</strong><br>
<strong>Release 8 Java Platform, Enterprise Edition</strong><br>
E63026-01</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="concurrency-utilities002.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="concurrency-utilities004.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="concurrency-and-transactions">56.3 Concurrency and Transactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The most basic operations for transactions are commit and rollback, but,
in a distributed environment with concurrent processing, it can be
difficult to guarantee that commit or rollback operations will be
successfully processed, and the transaction can be spread among
different threads, CPU cores, physical machines, and networks.</p>
</div>
<div class="paragraph">
<p>Ensuring that a rollback operation will successfully execute in such a
scenario is crucial. Concurrency Utilities relies on the Java
Transaction API (JTA) to implement and support transactions on its
components through <code>javax.transaction.UserTransaction</code>, allowing
application developers to explicitly manage transaction boundaries. More
information is available in the JTA specification.</p>
</div>
<div class="paragraph">
<p>Optionally, context objects can begin, commit, or roll back
transactions, but these objects cannot enlist in parent component
transactions.</p>
</div>
<div class="paragraph">
<p>The following code snippet illustrates a <code>Runnable</code> task that obtains a
<code>UserTransaction</code> and then starts and commits a transaction while
interacting with other transactional components, such as an enterprise
bean and a database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">public class MyTransactionalTask implements Runnable {

   UserTransaction ut = ... // obtained through JNDI or injection

   public void run() {

       // Start a transaction
       ut.begin();

       // Invoke a Service or an EJB
       myEJB.businessMethod();

       // Update a database entity using an XA JDBC driver
       myEJB.updateCustomer(customer);

       // Commit the transaction
       ut.commit();

   }
}</code></pre>
</div>
</div>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 10%;">
<col style="width: 65%;">
<col style="width: 10%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="concurrency-utilities002.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="concurrency-utilities004.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/oracle.gif" alt="Oracle Logo"></span>
<a href="cpyr.html"><br>
Copyright © 2014, 2017, Oracle and/or its affiliates. All rights reserved.</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>

  </body>
</html>