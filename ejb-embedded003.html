
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>The standalone Example Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>

<div id="preamble">
<div class="sectionbody">
<table id="top" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 45%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Java Platform, Enterprise Edition The Java EE Tutorial</strong><br>
<strong>Release 8 Java Platform, Enterprise Edition</strong><br>
E63026-01</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="ejb-embedded002.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="ejb-async.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="the-standalone-example-application">35.3 The standalone Example Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>standalone</code> example application demonstrates how to create an
instance of the embedded enterprise bean container in a JUnit test class
and call a session bean business method.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BEIDAJAC">Section 35.3.1, "Overview of the standalone Example
Application"</a></p>
</li>
<li>
<p><a href="#GKCQP">Section 35.3.2, "To Run the standalone Example Application
Using NetBeans IDE"</a></p>
</li>
<li>
<p><a href="#BEIGHEHJ">Section 35.3.3, "To Run the standalone Example
Application Using Maven"</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="overview-of-the-standalone-example-application">35.3.1 Overview of the standalone Example Application</h3>
<div class="paragraph">
<p>Testing the business methods of an enterprise bean in a unit test allows
developers to exercise the business logic of an application separately
from the other application layers, such as the presentation layer, and
without having to deploy the application to a Java EE server.</p>
</div>
<div class="paragraph">
<p>The <code>standalone</code> example has two main components: <code>StandaloneBean</code>, a
stateless session bean, and <code>StandaloneBeanTest</code>, a JUnit test class
that acts as a client to <code>StandaloneBean</code> using the embedded container.</p>
</div>
<div class="paragraph">
<p><code>StandaloneBean</code> is a simple session bean exposing a local, no-interface
view with a single business method, <code>returnMessage</code>, which returns
"Greetings!" as a <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">@Stateless
public class StandaloneBean {

    private static final String message = "Greetings!";

    public String returnMessage() {
        return message;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>StandaloneBeanTest</code> calls <code>StandaloneBean.returnMessage</code> and tests that
the returned message is correct. First, an embedded container instance
and initial context are created within the <code>setUp</code> method, which is
annotated with <code>org.junit.Before</code> to indicate that the method should be
executed before the test methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">@Before
public void setUp() {
    ec = EJBContainer.createEJBContainer();
    ctx = ec.getContext();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>testReturnMessage</code> method, annotated with <code>org.junit.Test</code> to
indicate that the method includes a unit test, obtains a reference to
<code>StandaloneBean</code> through the <code>Context</code> instance, and calls
<code>StandaloneBean.returnMessage</code>. The result is compared with the expected
result using a JUnit assertion, <code>assertEquals</code>. If the string returned
from <code>StandaloneBean.returnMessage</code> is equal to "Greetings!" the test
passes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">@Test
public void testReturnMessage() throws Exception {
    logger.info("Testing standalone.ejb.StandaloneBean.returnMessage()");
    StandaloneBean instance = (StandaloneBean)
            ctx.lookup("java:global/classes/StandaloneBean");
    String expResult = "Greetings!";
    String result = instance.returnMessage();
    assertEquals(expResult, result);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>tearDown</code> method, annotated with <code>org.junit.After</code> to
indicate that the method should be executed after all the unit tests
have run, closes the embedded container instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">@After
public void tearDown() {
    if (ec != null) {
        ec.close();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="to-run-the-standalone-example-application-using-netbeans-ide">35.3.2 To Run the standalone Example Application Using NetBeans IDE</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="usingexamples002.html#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">tut-install/examples/ejb</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>standalone</code> folder and click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click <code>standalone</code> and select Test.</p>
<div class="paragraph">
<p>This will execute the JUnit test class <code>StandaloneBeanTest</code>. The Output
tab shows the progress of the test and the output log.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="to-run-the-standalone-example-application-using-maven">35.3.3 To Run the standalone Example Application Using Maven</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="usingexamples002.html#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">tut-install/examples/ejb/standalone/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command compiles and packages the application into an JAR file, and
executes the JUnit test class <code>StandaloneBeanTest</code>.</p>
</div>
</li>
</ol>
</div>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 10%;">
<col style="width: 65%;">
<col style="width: 10%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="ejb-embedded002.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="ejb-async.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/oracle.gif" alt="Oracle Logo"></span>
<a href="cpyr.html"><br>
Copyright © 2014, 2017, Oracle and/or its affiliates. All rights reserved.</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

  </body>
</html>