
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Implementing an Event Listener</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>

<div id="preamble">
<div class="sectionbody">
<table id="top" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 45%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Java Platform, Enterprise Edition The Java EE Tutorial</strong><br>
<strong>Release 8 Java Platform, Enterprise Edition</strong><br>
E63026-01</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="jsf-custom006.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="jsf-custom008.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="implementing-an-event-listener">15.7 Implementing an Event Listener</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JavaServer Faces technology supports action events and value-change
events for components.</p>
</div>
<div class="paragraph">
<p>Action events occur when the user activates a component that implements
<code>javax.faces.component.ActionSource</code>. These events are represented by
the class <code>javax.faces.event.ActionEvent</code>.</p>
</div>
<div class="paragraph">
<p>Value-change events occur when the user changes the value of a component
that implements <code>javax.faces.component.EditableValueHolder</code>. These
events are represented by the class
<code>javax.faces.event.ValueChangeEvent</code>.</p>
</div>
<div class="paragraph">
<p>One way to handle events is to implement the appropriate listener
classes. Listener classes that handle the action events in an
application must implement the interface
<code>javax.faces.event.ActionListener</code>. Similarly, listeners that handle the
value-change events must implement the interface
<code>javax.faces.event.ValueChangeListener</code>.</p>
</div>
<div class="paragraph">
<p>This section explains how to implement the two listener classes.</p>
</div>
<div class="paragraph">
<p>To handle events generated by custom components, you must implement an
event listener and an event handler and manually queue the event on the
component. See <a href="jsf-custom008.html#BNAWD">Handling Events for Custom
Components</a> for more information.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>+</pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>You do not need to create an <code>ActionListener</code> implementation to handle
an event that results solely in navigating to a page and does not
perform any other application-specific processing. See
<a href="jsf-develop003.html#BNAVC">Writing a Method to Handle Navigation</a> for
information on how to manage page navigation.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="literalblock">
<div class="content">
<pre>+</pre>
</div>
</div>
<div class="sect2">
<h3 id="implementing-value-change-listeners">15.7.1 Implementing Value-Change Listeners</h3>
<div class="paragraph">
<p>A <code>javax.faces.event.ValueChangeListener</code> implementation must include a
<code>processValueChange(ValueChangeEvent)</code> method. This method processes the
specified value-change event and is invoked by the JavaServer Faces
implementation when the value-change event occurs. The
<code>ValueChangeEvent</code> instance stores the old and the new values of the
component that fired the event.</p>
</div>
<div class="paragraph">
<p>In the Duke&#8217;s Bookstore case study, the <code>NameChanged</code> listener
implementation is registered on the <code>name</code> <code>UIInput</code> component on the
<code>bookcashier.xhtml</code> page. This listener stores into session scope the
name the user entered in the field corresponding to the name component.</p>
</div>
<div class="paragraph">
<p>The <code>bookreceipt.xhtml</code> subsequently retrieves the name from the session
scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">&lt;h:outputFormat title="thanks"
                value="#{bundle.ThankYouParam}"&gt;
    &lt;f:param value="#{sessionScope.name}"/&gt;
&lt;/h:outputFormat&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the <code>bookreceipt.xhtml</code> page is loaded, it displays the name inside
the message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">"Thank you, {0}, for purchasing your books from us."</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is part of the <code>NameChanged</code> listener implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">public class NameChanged extends Object implements ValueChangeListener {

    @Override
    public void processValueChange(ValueChangeEvent event)
            throws AbortProcessingException {

        if (null != event.getNewValue()) {
            FacesContext.getCurrentInstance().getExternalContext().
                getSessionMap().put("name", event.getNewValue());
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user enters the name in the field, a value-change event is
generated, and the <code>processValueChange(ValueChangeEvent)</code> method of the
<code>NameChanged</code> listener implementation is invoked. This method first gets
the ID of the component that fired the event from the <code>ValueChangeEvent</code>
object, and it puts the value, along with an attribute name, into the
session map of the <code>FacesContext</code> instance.</p>
</div>
<div class="paragraph">
<p><a href="jsf-page-core002.html#BNATA">Registering a Value-Change Listener on a
Component</a> explains how to register this listener onto a component.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementing-action-listeners">15.7.2 Implementing Action Listeners</h3>
<div class="paragraph">
<p>A <code>javax.faces.event.ActionListener</code> implementation must include a
<code>processAction(ActionEvent)</code> method. The <code>processAction(ActionEvent)</code>
method processes the specified action event. The JavaServer Faces
implementation invokes the <code>processAction(ActionEvent)</code> method when the
<code>ActionEvent</code> occurs.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore case study uses two <code>ActionListener</code>
implementations, <code>LinkBookChangeListener</code> and <code>MapBookChangeListener</code>.
See <a href="jsf-custom008.html#BNAWD">Handling Events for Custom Components</a>
for details on <code>MapBookChangeListener</code>.</p>
</div>
<div class="paragraph">
<p><a href="jsf-page-core002.html#BNATB">Registering an Action Listener on a
Component</a> explains how to register this listener onto a component.</p>
</div>
<hr>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 5%;">
<col style="width: 10%;">
<col style="width: 65%;">
<col style="width: 10%;">
<col style="width: 5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="jsf-custom006.html"><span class="image"><img src="img/leftnav.gif" alt="Previous"></span><br>
Previous</a> </p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="jsf-custom008.html"><span class="image"><img src="img/rightnav.gif" alt="Next"></span><br>
Next</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/oracle.gif" alt="Oracle Logo"></span>
<a href="cpyr.html"><br>
Copyright © 2014, 2017, Oracle and/or its affiliates. All rights reserved.</a></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="toc.html"><span class="image"><img src="img/toc.gif" alt="Go To Table Of Contents"></span><br>
Contents</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

  </body>
</html>